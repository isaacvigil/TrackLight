---
alwaysApply: false
description: Overview of all cursor rules in this project
---

# Cursor Rules Overview

This directory contains cursor rules that help guide development in this project.

## Available Rules

### 1. Project Structure ([project-structure.mdc](mdc:.cursor/rules/project-structure.mdc))
- **Always Applied**: Yes
- **Purpose**: Provides an overview of the project structure, tech stack, and key files
- **Use**: Automatically loaded for all requests

### 2. shadcn/ui Setup ([shadcn-ui.mdc](mdc:.cursor/rules/shadcn-ui.mdc))
- **Always Applied**: Yes
- **Purpose**: Guidelines for using shadcn/ui components
- **Covers**:
  - Configuration details
  - Component installation
  - CSS variables and theming
  - Best practices
  - Common components reference

### 3. Component Guidelines ([component-guidelines.mdc](mdc:.cursor/rules/component-guidelines.mdc))
- **Applied To**: `*.tsx`, `*.ts` files
- **Purpose**: Development guidelines for React and TypeScript files
- **Covers**:
  - shadcn/ui component usage patterns
  - Component structure conventions
  - Icon usage (lucide-react)
  - Dark mode handling
  - TypeScript best practices

### 4. Database Interactions ([database-interactions.mdc](mdc:.cursor/rules/database-interactions.mdc))
- **Always Applied**: Yes
- **Purpose**: Guidelines for all database operations using Drizzle ORM
- **Covers**:
  - Drizzle ORM setup and schema structure
  - CRUD operations with type safety
  - Query patterns and operators
  - Schema references for job applications and notes
  - Best practices for database interactions
  - Migration workflow

### 5. Authentication & Authorization ([authentication-authorization.mdc](mdc:.cursor/rules/authentication-authorization.mdc))
- **Always Applied**: Yes
- **Purpose**: Critical security guidelines for user authentication and data access control
- **Covers**:
  - Clerk authentication integration
  - User data isolation requirements
  - Required patterns for database queries with userId filtering
  - Server Actions and API route security
  - Client component authentication patterns
  - Security checklist for all user data access

### 6. AI Data Extraction ([ai-data-extraction.mdc](mdc:.cursor/rules/ai-data-extraction.mdc))
- **Always Applied**: Yes
- **Purpose**: Guidelines for using Vercel AI library to extract job data from URLs
- **Covers**:
  - Vercel AI SDK integration with OpenAI
  - Structured data extraction with Zod schemas
  - Job application data extraction patterns
  - Error handling and fallback strategies
  - Cost optimization with gpt-4o-mini
  - Loading states and user feedback
  - Security best practices for API keys

### 7. Clerk Billing ([clerk-billing.mdc](mdc:.cursor/rules/clerk-billing.mdc))
- **Always Applied**: Yes
- **Purpose**: Complete guide to implementing Clerk Billing for subscription management and feature access control
- **Covers**:
  - Available plans: `free_user`, `pro`, `unemployed`
  - Available features: `1k_rows`, `delete_rows`, `notes`
  - Protecting UI elements with `has()` method and `<Protect />` component
  - Server and client component access control patterns
  - Route protection using middleware
  - Server Actions with billing checks
  - Row limit enforcement
  - Upgrade prompts and CTAs
  - Plan-feature matrix and best practices

### 8. Accessibility ([accessibility.mdc](mdc:.cursor/rules/accessibility.mdc))
- **Applied To**: `*.tsx`, `*.ts` files
- **Purpose**: WCAG 2.2 Level AA accessibility compliance guidelines for all UI components and pages
- **Covers**:
  - Text alternatives for non-text content (alt text, aria-labels)
  - Color contrast requirements (4.5:1 for normal text, 3:1 for large text/UI)
  - Keyboard accessibility (all functionality operable via keyboard)
  - Focus indicators for interactive elements
  - Form labels and error associations
  - Semantic HTML structure (headings, lists, navigation)
  - ARIA attributes and roles (when needed)
  - Accessible tables, skip links, and screen reader support
  - shadcn/ui built-in accessibility features
  - Testing checklist and tools

## How to Use These Rules

1. **Automatic Application**: Rules marked with `alwaysApply: true` are automatically included in all AI interactions

2. **File-Specific Rules**: Rules with `globs` patterns are automatically applied when working with matching files

3. **Manual Reference**: Use the file references like `[filename.mdc](mdc:filename.mdc)` to explicitly reference a rule

## Adding New Rules

To create a new rule:

1. Create a `.mdc` file in this directory
2. Add frontmatter with `alwaysApply`, `description`, or `globs` as needed
3. Write your rule content in Markdown
4. Reference files using `[filename.ext](mdc:filename.ext)` format

## Quick Start

### shadcn/ui Components
- Install new components: `npx shadcn@latest add [component-name]`
- Import components: `import { Button } from "@/components/ui/button"`
- Use the `cn()` utility: `import { cn } from "@/lib/utils"`
- Reference [shadcn-ui.mdc](mdc:.cursor/rules/shadcn-ui.mdc) for detailed guidelines

### Database Operations
- Import: `import { db } from "@/lib/db"`
- Import schemas: `import { jobApplications, notes } from "@/db/schema"`
- Import operators: `import { eq, and, or } from "drizzle-orm"`
- Use type-safe operations with Drizzle query builder
- Reference [database-interactions.mdc](mdc:.cursor/rules/database-interactions.mdc) for detailed guidelines

### Authentication & Authorization
- Server: `import { auth } from "@clerk/nextjs/server"`
- Client: `import { useUser } from "@clerk/nextjs"`
- **ALWAYS** filter queries by `userId` for data isolation
- Verify user authentication before any database operations
- Reference [authentication-authorization.mdc](mdc:.cursor/rules/authentication-authorization.mdc) for security guidelines

### AI Data Extraction
- Import: `import { generateText, Output } from "ai"`
- Model: `import { openai } from "@ai-sdk/openai"`
- Use `Output.object()` with Zod schemas for type-safe AI responses
- Always implement error handling with fallback data
- Use `gpt-4o` for accuracy (data extraction requires precision - gpt-4o-mini may hallucinate)
- Reference [ai-data-extraction.mdc](mdc:.cursor/rules/ai-data-extraction.mdc) for detailed guidelines

### Clerk Billing
- Server: `import { auth } from "@clerk/nextjs/server"` then use `const { has } = await auth()`
- Client: `import { useAuth } from "@clerk/nextjs"` then use `const { has } = useAuth()`
- Protect UI: `import { Protect } from "@clerk/nextjs"` then use `<Protect feature="..." />`
- Check access: `has({ feature: 'delete_rows' })` or `has({ plan: 'pro' })`
- **ALWAYS** check access server-side in Server Actions before operations
- Display pricing: `import { PricingTable } from '@clerk/nextjs'`
- Reference [clerk-billing.mdc](mdc:.cursor/rules/clerk-billing.mdc) for detailed guidelines

### Accessibility (WCAG 2.2)
- **ALWAYS** provide alt text for images: `<img src="..." alt="descriptive text" />`
- **ALWAYS** label icons: `<button aria-label="Delete"><Trash2 /></button>`
- **ALWAYS** ensure 4.5:1 color contrast for text (use theme variables)
- **ALWAYS** support keyboard navigation (use semantic HTML: `<button>` not `<div onClick>`)
- **ALWAYS** provide visible focus indicators (built into shadcn/ui components)
- **ALWAYS** associate labels with inputs: `<Label htmlFor="id">` + `<Input id="id">`
- **ALWAYS** use semantic HTML: `<h1>`, `<nav>`, `<button>`, `<ul>`, etc.
- Use shadcn/ui components (pre-accessible) over custom implementations
- Test with keyboard (Tab, Enter, Escape) and screen readers
- Reference [accessibility.mdc](mdc:.cursor/rules/accessibility.mdc) for detailed guidelines
